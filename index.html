<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>VolixyHub.cc - Movies</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{background:#0a001a;color:#e0c0ff;font-family:system-ui;overflow:hidden;height:100vh;position:relative;}
        canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
        
        /* GRID - SMALL CARDS LIKE YOUTUBE */
        #grid{padding:15px;display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:15px;height:100vh;overflow-y:auto;}
        .card{background:rgba(100,0,180,0.5);border-radius:12px;overflow:hidden;position:relative;cursor:pointer;box-shadow:0 4px 15px rgba(255,0,255,0.2);transition:0.3s;}
        .card:hover{transform:scale(1.05);box-shadow:0 0 30px #ff00ff;}
        .thumb{width:100%;height:220px;object-fit:cover;border-radius:10px 10px 0 0;}
        .title{padding:8px 6px;color:#ff00ff;font-weight:bold;text-align:center;font-size:14px;line-height:1.3;height:50px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}
        .del{position:absolute;top:5px;right:5px;background:#ff0066;color:white;padding:4px 8px;border-radius:8px;display:none;cursor:pointer;z-index:10;font-size:12px;}
        .card:hover .del{display:block;}

        #plus{position:fixed;bottom:25px;right:25px;background:#ff00ff;width:65px;height:65px;border-radius:50%;font-size:38px;color:white;border:none;box-shadow:0 0 60px #ff00ff;z-index:100;cursor:pointer;}
        #overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.92);z-index:99;}
        #modal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#200040;padding:25px;border-radius:18px;width:90%;max-width:340px;box-shadow:0 0 80px #ff00ff;z-index:100;}
        #modal h2{color:#ff00ff;text-align:center;margin-bottom:15px;font-size:20px;}
        input{margin:10px 0;width:100%;padding:14px;border-radius:10px;border:none;background:#300060;color:white;font-size:16px;}
        button{width:100%;padding:14px;background:#ff00ff;color:white;border:none;border-radius:10px;margin-top:10px;font-size:17px;cursor:pointer;}
        button:hover{opacity:0.9;}
        button[onclick="closeModal()"]{background:#666;}

        #playerModal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#000;padding:15px;border-radius:20px;width:95%;max-width:900px;z-index:100;}
        #playerModal iframe,#playerModal video{width:100%;height:70vh;border:none;border-radius:15px;}
        .closePlayer{position:absolute;top:10px;right:15px;background:#ff0066;color:white;padding:8px 14px;border-radius:50%;cursor:pointer;z-index:101;}
    </style>
</head>
<body>

<canvas></canvas>

<button id="plus" onclick="openModal()">+</button>
<div id="overlay" onclick="closeModal()"></div>

<!-- POST POPUP -->
<div id="modal">
    <h2>Leak a Movie</h2>
    <input type="text" id="movieName" placeholder="Movie name">
    <input type="url" id="movieURL" placeholder="Movie link">
    <input type="url" id="movieIMG" placeholder="Image link">
    <button onclick="postMovie()">POST MOVIE</button>
    <button onclick="closeModal()">Cancel</button>
</div>

<!-- PLAYER POPUP -->
<div id="playerModal" onclick="closePlayer()">
    <div class="closePlayer" onclick="closePlayer()">X</div>
    <div id="player"></div>
</div>

<div id="grid"></div>

<script>
// Load movies
let movies = JSON.parse(localStorage.getItem("volixyMovies") || "[]");
let nextId = movies.length ? Math.max(...movies.map(m=>m.id)) + 1 : 1;
movies.forEach(m => createCard(m.name, m.url, m.img, m.id));

function openModal() {
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('modal').style.display = 'block';
}
function closeModal() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('modal').style.display = 'none';
    document.getElementById('movieName').value = '';
    document.getElementById('movieURL').value = '';
    document.getElementById('movieIMG').value = '';
}

function postMovie() {
    const name = document.getElementById('movieName').value.trim();
    const url = document.getElementById('movieURL').value.trim();
    const img = document.getElementById('movieIMG').value.trim() || "https://via.placeholder.com/300x420/300060/ffffff?text=No+Image";

    if (!name || !url) return alert("Name and link required!");

    createCard(name, url, img, nextId);
    movies.push({id: nextId, name, url, img});
    localStorage.setItem("volixyMovies", JSON.stringify(movies));
    nextId++;
    closeModal();
}

function createCard(name, url, img, id) {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
        <img src="${img}" class="thumb" onerror="this.src='https://via.placeholder.com/300x420/300060/ffffff?text=No+Image'">
        <div class="title">${name}</div>
        <div class="del" onclick="deleteMovie(${id});event.stopPropagation()">X</div>
    `;
    card.onclick = (e) => {
        if (!e.target.classList.contains('del')) playMovie(url);
    };
    document.getElementById('grid').appendChild(card);
}

function playMovie(url) {
    let player;
    if (url.includes('vidify.top')) player = `<iframe src="${url}" allowfullscreen></iframe>`;
    else if (url.includes('youtube.com') || url.includes('youtu.be')) {
        const id = url.split('v=')[1]?.split('&')[0] || url.split('/').pop();
        player = `<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
    } else player = `<video controls autoplay><source src="${url}"></video>`;

    document.getElementById('player').innerHTML = player;
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('playerModal').style.display = 'block';
}

function closePlayer() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('playerModal').style.display = 'none';
    document.getElementById('player').innerHTML = '';
}

function deleteMovie(id) {
    if (confirm("Delete forever?")) {
        movies = movies.filter(m => m.id !== id);
        localStorage.setItem("volixyMovies", JSON.stringify(movies));
        location.reload();
    }
}

// Snow
let c=document.querySelector("canvas"),ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;
let s=[];
for(let i=0;i<400;i++) s.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*3+1,spd:Math.random()*1.5+0.5});
function snow(){
    ctx.clearRect(0,0,c.width,c.height);
    s.forEach(p=>{
        ctx.fillStyle="rgba(255,200,255,0.9)";
        ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();
        p.y+=p.spd;if(p.y>c.height)p.y=-10;
    });
    requestAnimationFrame(snow);
}
snow();
</script>
</body>
</html>
